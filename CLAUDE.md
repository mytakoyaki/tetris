# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## プロジェクト概要

**ClaudeTetris** - テトリス初心者をターゲットにした、革新的なポイントシステムとフィーバーモードを持つWebベースのテトリスゲーム。モダンブラウザ向けにHTML5、CSS3、JavaScript（ES6+）で構築。

## プロジェクトアーキテクチャ

### コアゲームメカニクス
- **ポイントシステム**: テトリミノ設置1回につき10ポイント獲得、戦略的優位性に使用可能
- **ブロック交換**: 30ポイント消費で現在落下中のブロックを交換（Eキー）
- **フィーバーモード**: 30回テトリミノ設置毎に発動、20秒間の特別効果:
  - 無料無制限ブロック交換
  - 全スコア2倍ボーナス
- **ホールドシステム**: 標準テトリスのホールド機能（Cキー）

### ゲーム構造
- **ゲームフィールド**: クラシックテトリスルールに従う10x20グリッド
- **テトリミノタイプ**: 標準7種類（I, O, T, S, Z, J, L）
- **UIレイアウト**: 3エリア構成:
  - 左: HOLD表示、フィーバーゲージ
  - 中央: ゲームフィールド
  - 右: SCORE、POINTS、NEXTブロック

### 操作方法
- 矢印キー: 移動（左/右/ソフトドロップ）と回転（上）
- スペース: ハードドロップ
- C: ホールド機能
- E: NEXTブロック交換（独自機能）

## 開発コマンド

バニラWebプロジェクトのため、ビルドシステムは不要:

```bash
# 開発
# index.htmlをブラウザで直接開くか、ローカルサーバーを使用:
python -m http.server 8000
# または
npx serve .

# テスト
# ブラウザでの手動テスト（Chrome, Firefox, Safari, Edge）
```

## ファイル構造（作成予定）

```
/
├── index.html          # 3エリアレイアウトのメインゲームページ
├── style.css          # ゲームスタイリングと視覚効果
├── script.js          # メインゲームロジックと状態管理
├── js/
│   ├── tetrominos.js  # テトリミノ定義とロジック
│   ├── gameField.js   # ゲームフィールド管理
│   ├── pointSystem.js # ポイント獲得と交換システム
│   ├── feverMode.js   # フィーバーモードメカニクス
│   └── ui.js          # UI更新と表示ロジック
└── readme.txt         # プロジェクト仕様書（日本語）
```

## ゲーム状態とロジック

### 主要ゲーム状態
- **スタート画面**: タイトルとSTART GAMEボタン
- **プレイ中**: 全メカニクスが有効なメインゲーム
- **フィーバーモード**: 20秒間の特別強化ゲームプレイ
- **ゲームオーバー**: 最終スコア表示とPLAY AGAINオプション

### スコア計算
- 1ライン: 100点
- 2ライン: 300点
- 3ライン: 500点
- 4ライン（テトリス）: 800点
- フィーバーモード中は全スコア2倍

## 実装注意事項

- 仕様書要件に従う: ハードコード禁止
- 同名の関数/変数名を避ける
- 初心者向けゲームプレイに焦点、明確な視覚フィードバック
- モチベーション維持のためフィーバーモード進捗カウンター実装
- フィーバーモード中のボーナススコア表示
- モダンブラウザでの滑らかな60fps保証

## 視覚効果優先順位

1. フィーバーモード発動アニメーション（「FEVER!」表示）
2. ボーナススコア表示（「+200 (x2 BONUS!)」）
3. フィーバータイマー/ゲージ表示
4. ブロック交換コスト表示（「-30P」）
5. フィーバーモード中の背景エフェクト